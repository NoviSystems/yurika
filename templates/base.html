{% load staticfiles %}
{% load utils %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Yurika{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/yurika.css' %}">
    {% block header %}{% endblock %}
</head>
<body>

<nav class="navbar navbar-primary navbar-inverse">
    <div class="container">
        <div class="navbar-header">

          {% if request.user.is_authenticated %}
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-links" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
          {% endif %}

          <a class="navbar-brand" href="{% url 'home' %}">Yurika</a>
        </div>
        {% if request.user.is_authenticated %}
          <div class="collapse navbar-collapse" id="nav-links">
            <ul class="nav navbar-nav">

              {% url 'configure' as configure_url %}
              {% url 'analyze' as execute_url %}
              {% url 'explorer_index' as explorer_url %}
              <li class="{% isactive configure_url %} {% if RUNNING %}disabled{% endif %}">
                <a href="{% if not RUNNING %}{{ configure_url }}{% endif %}">1. Configure</a>
              </li>

              <li class="{% isactive execute_url %} {% if not CONFIGURED %}disabled{% endif %}">
                <a href="{% if CONFIGURED %}{{ analyze_url }}{% endif %}">2. Execute</a>
              </li>

              <li class="{% isactive explorer_url %} {% if not FINISHED %}disabled{% endif %}">
                <a href="{% if FINISHED %}{{ explorer_url }}{% endif %}">3. Explore</a>
              </li>

            </ul>
            <p class="navbar-text navbar-right">
              Logged in as {{ request.user }}
              /
              <a href="{% url 'logout' %}">Logout</a>
            </p>
          </div>
        {% else %}
          <p class="navbar-text navbar-right">
            <a href="{% url 'login' %}">Login</a>
          </p>
        {% endif %}
    </div>
</nav>

{% block messages %}
<div class="container">
    {% for message in messages %}
    <div class="alert alert-dismissable {{ message.tags }}" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endblock %}

<div class="container">
    {% block content %}{% endblock %}
</div>

<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/vue.js' %}"></script>
{% block scripts %}{% endblock %}

</body>
</html>
